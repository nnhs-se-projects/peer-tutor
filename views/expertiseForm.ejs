<%- include('include/_header') %> <%- include('include/_tutNavBar') %>

<!-- Main Site -->
<main>
  <div class="createEntry-form">
    <h1 class="black-heading">Tutor Expertise Form</h1>

    <form>
      <!-- Student Name -->
      <div class="orange-box">
        <label class="formQuestions">First Name</label>
        <input type="text" id="firstName" name="firstName" required />
        <label class="formQuestions">Last Name</label>
        <input type="text" id="lastName" name="lastName" required />
      </div>

      <!-- Tutor ID -->
      <div class="orange-box">
        <label class="formQuestions">ID Number</label>
        <input type="text" id="tutorID" name="tutorID" required />
      </div>

      <!-- Student Email -->
      <div class="orange-box">
        <label class="formQuestions">Email</label>
        <input type="email" id="tutEmail" name="tutEmail" required />
      </div>

      <!-- Student Grade -->
      <div class="orange-box">
        <label class="formQuestions">Grade</label>
        <fieldset>
          <% for(let grade of grades) { %>
          <label>
            <input
              type="radio"
              class="habits"
              name="grade"
              value="<%= grade %>"
            /><%= grade %>
          </label>
          <% } %>
        </fieldset>
      </div>

      <!-- Student New/Returning -->
      <div class="orange-box">
        <label class="formQuestions">New or Returning?</label>
        <fieldset>
          <% for(let option of options) { %>
          <label>
            <input
              type="radio"
              class="options"
              name="newReturning"
              value="<%= option %>"
            /><%= option %>
          </label>
          <% } %>
        </fieldset>
      </div>

      <!-- Student Lunch Period -->
      <div class="orange-box">
        <label class="formQuestions">Lunch Period</label>
        <fieldset>
          <% for(let lunchPeriod of lunchPeriods) { %>
          <label>
            <input
              type="radio"
              class="lunchPeriod"
              name="lunchPeriod"
              value="<%= lunchPeriod %>"
            /><%= lunchPeriod %>
          </label>
          <% } %>
        </fieldset>
      </div>

      <!-- Student Tutoring Days -->
      <div class="orange-box">
        <label class="formQuestions">Tutoring Days (check 2-3)</label>
        <fieldset>
          <% for(let dayOfTheWeek of daysOfTheWeek) { %>
          <label>
            <input
              type="checkbox"
              class="dayOfTheWeek"
              name="dayOfTheWeek"
              value="<%= dayOfTheWeek %>"
            /><%= dayOfTheWeek %>
          </label>
          <% } %>
        </fieldset>
      </div>
    </form>
  </div>

  <div class="orange-box">
    <div class="form-columns">
      <!-- Left Column (Tutor Information and Session Details) -->
      <div class="form-column">
        <!-- Student Classes -->
        <label class="formQuestions">Courses I can tutor:</label>
        <input
          type="text"
          id="courseSearch"
          placeholder="Search for a class..."
          oninput="filterCourseList()"
        />
        <fieldset id="courseList">
          <% for(let course of courseList) { %>
          <label style="display: none">
            <input
              type="checkbox"
              class="courseCheckbox"
              name="courseList"
              value="<%= course %>"
            />
            <%= course %>
          </label>
          <% } %>
        </fieldset>
      </div>
      <!-- Right Column-->
      <div class="form-column">
        <label class="formQuestions">Selected Courses:</label>
        <ul id="selectedCourses"></ul>
      </div>
    </div>
  </div>

  <div class="createEntry-form">
    <input type="submit" class="submit" value="Submit" />
  </div>
</main>

<script src="js/expertiseForm.js"></script>

<%- include('include/_footer') %>

<script>
  // Function to filter the course list based on search input
  function filterCourseList() {
    const searchInput = document
      .getElementById("courseSearch")
      .value.toLowerCase();
    const checkboxes = document.querySelectorAll("#courseList .courseCheckbox");

    checkboxes.forEach((checkbox) => {
      const label = checkbox.parentElement;
      const optionText = checkbox.value.toLowerCase();
      if (searchInput === "") {
        label.style.display = "none";
      } else if (optionText.includes(searchInput)) {
        label.style.display = "";
      } else {
        label.style.display = "none";
      }
    });
  }

  // Function to update the selected items list
  function updateSelectedItems() {
    const selectedCheckboxes = document.querySelectorAll(
      "#courseList .courseCheckbox:checked"
    );
    const listElement = document.getElementById("selectedCourses");
    listElement.innerHTML = ""; // Clear the list

    selectedCheckboxes.forEach((checkbox) => {
      const li = document.createElement("li");
      li.textContent = checkbox.value;
      listElement.appendChild(li);
    });
  }

  // Add event listener to the checkboxes
  document
    .querySelectorAll("#courseList .courseCheckbox")
    .forEach((checkbox) => {
      checkbox.addEventListener("change", updateSelectedItems);
    });

  // Add event listener to the search input
  document
    .getElementById("courseSearch")
    .addEventListener("input", filterCourseList);
</script>
