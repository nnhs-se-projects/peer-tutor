<%- include('include/_header') %> <%- include('include/_stuNavBar') %>

<!-- Main Site -->
<main>
  <div class="createEntry-form">
    <h1>Tutor Expertise Form</h1>

    <!-- Student Name -->
    <label class="formQuestions">First Name</label>
    <input type="text" id="firstName" name="firstName" required />
    <label class="formQuestions">Last Name</label>
    <input type="text" id="lastName" name="lastName" required />

    <!-- Student Email -->
    <label class="formQuestions">Email</label>
    <input type="email" id="tutEmail" name="tutEmail" required />

    <!-- Student Grade -->
    <label class="formQuestions">Grade</label>
    <fieldset>
      <% for(let grade of grades) { %>
      <label>
        <input
          type="radio"
          class="habits"
          name="grade"
          value="<%= grade %>"
        /><%= grade %>
      </label>
      <% } %>
    </fieldset>

    <!-- Student New/Returning -->
    <label class="formQuestions">New or Returning?</label>
    <fieldset>
      <% for(let option of options) { %>
      <label>
        <input
          type="radio"
          class="options"
          name="newReturning"
          value="<%= option %>"
        /><%= option %>
      </label>
      <% } %>
    </fieldset>

    <!-- Student Lunch Period -->
    <label class="formQuestions">Lunch Period</label>
    <fieldset>
      <% for(let lunchPeriod of lunchPeriods) { %>
      <label>
        <input
          type="radio"
          class="lunchPeriod"
          name="lunchPeriod"
          value="<%= lunchPeriod %>"
        /><%= lunchPeriod %>
      </label>
      <% } %>
    </fieldset>

    <!-- Student Tutoring Days -->
    <label class="formQuestions">Tutoring Days (check 2-3)</label>
    <fieldset>
      <% for(let dayOfTheWeek of daysOfTheWeek) { %>
      <label>
        <input
          type="checkbox"
          class="dayOfTheWeek"
          name="dayOfTheWeek"
          value="<%= dayOfTheWeek %>"
        /><%= dayOfTheWeek %>
      </label>
      <% } %>
    </fieldset>

    <div class="form-columns">
        <!-- Left Column (Tutor Information and Session Details) -->
        <div class="form-column"></div>
    <!-- Right Column (Student Classes) -->
        <div class="form-column"></div>
    <!-- Student Classes -->
    <label class="formQuestions">Classes</label>
    <input
      type="text"
      id="courseSearch"
      placeholder="Search for a class..."
      oninput="filterCourseList()"
    />
    <fieldset id="courseList">
      <% for(let course of courseList) { %>
      <label style="display: none">
        <input
          type="checkbox"
          class="courseCheckbox"
          name="courseList"
          value="<%= course %>"
        />
        <%= course %>
      </label>
      <% } %>
    </fieldset>
    <ul id="selectedCourses"></ul>
    <input type="submit" class="submit" value="Submit" />
  </div>
</main>

<%- include('include/_footer') %>

<script>
  // Function to filter the course list based on search input
  function filterCourseList() {
    const searchInput = document
      .getElementById("courseSearch")
      .value.toLowerCase();
    const checkboxes = document.querySelectorAll("#courseList .courseCheckbox");

    checkboxes.forEach((checkbox) => {
      const label = checkbox.parentElement;
      const optionText = checkbox.value.toLowerCase();
      if (searchInput === "") {
        label.style.display = "none";
      } else if (optionText.startsWith(searchInput)) {
        label.style.display = "";
      } else {
        label.style.display = "none";
      }
    });
  }

  // Function to update the selected items list
  function updateSelectedItems() {
    const selectedCheckboxes = document.querySelectorAll(
      "#courseList .courseCheckbox:checked"
    );
    const listElement = document.getElementById("selectedCourses");
    listElement.innerHTML = ""; // Clear the list

    selectedCheckboxes.forEach((checkbox) => {
      const li = document.createElement("li");
      li.textContent = checkbox.value;
      listElement.appendChild(li);
    });
  }

  // Add event listener to the checkboxes
  document
    .querySelectorAll("#courseList .courseCheckbox")
    .forEach((checkbox) => {
      checkbox.addEventListener("change", updateSelectedItems);
    });

  // Add event listener to the search input
  document
    .getElementById("courseSearch")
    .addEventListener("input", filterCourseList);
</script>
