<%- include('include/_header') %> <%- include('include/_homepageNavBar') %>

<!-- Leaderboard -->
<main>
  <h1 class="black-heading">Huskie Peer Tutoring Leaderboard</h1>
  <div class="blue-box">
    <div class="leaderboard">
      <table class="leaderboard-table">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Progress</th>
            <th>Total Sessions</th>
          </tr>
        </thead>
        <tbody>
          <% tutors.forEach((tutor, index) => { const maxSessions =
          Math.max(...tutors.map(t => t.totalSessions)); const progressPercent =
          Math.round((tutor.totalSessions / maxSessions) * 100); %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= tutor.firstName %> <%= tutor.lastName %></td>
            <td>
              <div class="progress-bar">
                <div
                  class="bar-green"
                  style="width: <%= progressPercent %>%"
                ></div>
                <div
                  class="bar-red"
                  style="width: <%= 100 - progressPercent %>%"
                ></div>
              </div>
            </td>
            <td><%= tutor.totalSessions %></td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</main>

<!-- Footer and Scripts -->
<script src="/js/index.js"></script>
<link rel="stylesheet" href="/css/styles.css" />
<%- include('include/_footer') %>
